{"version":3,"sources":["src/app.js","src/environment.js","src/main.js","src/shell.js","src/models/todo.js","src/resources/index.js","src/services/inmemory-todo-promise-service.js","src/services/inmemory-todo-service.js","src/services/pouchdb-todo-promise-service.js","src/todo/todo.js","src/todo-manager/detail.js","src/todo-manager/index.js","src/todo-manager/no-selection.js","src/utilities/idgenerator.js","src/resources/attributes/auto-focus.js","src/resources/attributes/keyup-enter.js","src/resources/attributes/keyup-esc.js","src/resources/elements/todo-action.js","src/resources/elements/todo-add.js","src/resources/elements/todo-filter.js","src/resources/elements/todo-item.js","src/resources/elements/todo-list.js","src/resources/elements/todo-popup-item.js","styles.scss"],"names":["App","appName","todoTitle","activeFilter","todoService","filterTodos","filterCriteria","todos","filterTodosSync","addTodo","then","console","log","addedTodo","removeTodo","todo","deleteTodoById","id","deletedTodo","catch","error","updateTodo","editMode","updateTodoById","updatedTodo","checkIfAllTodosAreCompleted","every","completed","toggleAllTodos","result","completeAllTodos","removeAllTodos","removeCompletedTodos","length","debug","testing","configure","Promise","config","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","setRoot","Shell","configureRouter","router","title","map","route","name","redirect","moduleId","nav","Todo","getNextId","InMemoryTodoPromiseService","latency","isRequesting","getAllTodos","resolve","setTimeout","getTodoById","found","filter","pop","JSON","parse","stringify","instance","push","reject","ex","values","Object","assign","toggleTodoCompleted","t","forEach","splice","InMemoryTodoService","PouchDBTodoPromiseService","db","PouchDB","adapter","completedTodosCount","allTodosCount","activeTodosCount","allDocs","include_docs","rows","doc","err","get","toString","put","remove","bulkDocs","all","row","value","rev","tobeDeletedTodos","_deleted","self","activate","params","routeConfig","previousTitle","navModel","setTitle","todoBeforeEdit","backToList","navigate","generate","update","cancel","canDeactivate","confirm","Detail","refresh","Index","todoCompleted","cancelEditTodo","NoSelection","_IdGenerator","IdGenerator","AutoFocusCustomAttribute","Element","twoWay","element","taskQueue","giveFocus","queueMicroTask","focus","attached","valueChanged","newValue","oldValue","KeyupEnterCustomAttribute","enterPressed","key","e","which","keyCode","addEventListener","detached","removeEventListener","inject","KeyupEscCustomAttribute","escPressed","TodoAction","defaultBindingMode","TodoAdd","TodoFilter","TodoItem","updateSingleInNewPage","TodoList","host","TodoPopupItem","todoChanged","toggleCompleted","updateCallback"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {Todo} from './models/todo';\nimport {InMemoryTodoPromiseService} from './services/inmemory-todo-promise-service';\n\nexport class App {\n  constructor() {\n    this.appName = 'Todo List';\n    this.todoTitle = '';\n    this.activeFilter = 'all';\n    this.todoService = new InMemoryTodoPromiseService();\n    this.filterTodos(this.activeFilter);\n  }\n\n  get allTodosCount() {\n    return this.todoService.filterTodosSync('all').length;\n  }\n\n  get activeTodosCount() {\n    return this.todoService.filterTodosSync('active').length;\n  }\n\n  get completedTodosCount() {\n    return this.todoService.filterTodosSync('completed').length;\n  }\n\n  filterTodos(filterCriteria) {\n    this.activeFilter = filterCriteria;\n    this.todos = this.todoService.filterTodosSync(this.activeFilter);\n  }\n  addTodo() {\n    this.todoService.addTodo(new Todo(this.todoTitle, false)).then(addedTodo => {\n      this.todoTitle = '';\n      console.log(addedTodo);\n      this.todoService.filterTodos(this.activeFilter).then(todos => {\n        this.todos = todos;\n      });\n    });\n  }\n\n  removeTodo(todo) {\n    this.todoService.deleteTodoById(todo.id).then(deletedTodo => {\n      console.log(deletedTodo);\n      this.todoService.filterTodos(this.activeFilter).then(todos => {\n        this.todos = todos;\n      });\n    }).catch(error => {\n      console.log('ERROR: ' + error);\n    });\n  }\n\n  updateTodo(todo) {\n    if (todo.editMode) {\n      todo.editMode = false;\n      this.todoService.updateTodoById(todo.id, todo).then(updatedTodo => {\n        console.log(updatedTodo);\n      });\n    } else {\n      todo.editMode = true;\n    }\n  }\n\n  checkIfAllTodosAreCompleted() {\n    return this.todos.every(todo => todo.completed);\n  }\n\n  toggleAllTodos() {\n    this.todoService.toggleAllTodos().then(result => {\n      if (result) {\n        this.filterTodos(this.activeFilter);\n      }\n    });\n  }\n\n  completeAllTodos() {\n    this.todoService.completeAllTodos().then(result => {\n      if (result) {\n        this.checkIfAllTodosAreCompleted();\n        this.filterTodos(this.activeFilter);\n      }\n    });\n  }\n\n  removeAllTodos() {\n    this.todoService.removeAllTodos().then(result => {\n      if (result) {\n        this.filterTodos(this.activeFilter);\n      }\n    });\n  }\n\n  removeCompletedTodos() {\n    this.todoService.removeCompletedTodos().then(result => {\n      if (result) {\n        this.filterTodos(this.activeFilter);\n      }\n    });\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot('shell'));\n}\n","import {inject, Aurelia} from 'aurelia-framework';\n\n@inject(Aurelia)\nexport class Shell {\n  constructor(aurelia) {\n    this.aurelia = aurelia;\n  }\n  configureRouter(config, router) {\n    config.title = 'Aurelia';\n    config.map([\n      { route: '', name: 'default', redirect: 'todos'},\n      { route: 'todos', name: 'todos', moduleId: 'todo-manager/index', nav: true },\n      { route: 'todo/:id', name: 'todo', moduleId: 'todo/todo' }\n    ]);\n\n    this.router = router;\n  }\n}\n","import {IdGenerator} from '../utilities/idgenerator';\n\nexport class Todo {\n  constructor(title, completed = false) {\n    this.id = IdGenerator.getNextId();\n    this.title = title;\n    this.completed = completed;\n  }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","export class InMemoryTodoPromiseService {\n  constructor() {\n    this.todos = [];\n    this.latency = 100;\n    this.isRequesting = false;\n  }\n\n  getAllTodos() {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        resolve(this.todos);\n        this.isRequesting = false;\n      }, this.latency);\n    });\n  }\n\n  getTodoById(id) {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        let found = this.todos.filter(todo => todo.id === id).pop();\n        resolve(JSON.parse(JSON.stringify(found)));\n        this.isRequesting = false;\n      }, this.latency);\n    });\n  }\n\n  addTodo(todo) {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        let instance = JSON.parse(JSON.stringify(todo));\n        this.todos.push(todo);\n        this.isRequesting = false;\n        resolve(instance);\n      }, this.latency);\n    });\n  }\n\n  deleteTodoById(id) {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.getTodoById(id).then( deletedTodo => {\n          // throw new Error('Simulating an error');\n          this.todos = this.todos.filter(todo => todo.id !== id);\n          this.isRequesting = false;\n          resolve(deletedTodo);\n        }).catch(ex => {\n          reject(ex);\n        });\n      }, this.latency);\n    });\n  }\n\n  updateTodoById(id, values = {}) {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        this.getTodoById(id).then( updatedTodo => {\n          Object.assign(updatedTodo, values);\n          this.isRequesting = false;\n          resolve(updatedTodo);\n        });\n      }, this.latency);\n    });\n  }\n\n  toggleTodoCompleted(todo) {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        this.updateTodoById(todo.id, { completed: !todo.completed }).then(\n        updatedTodo => {\n          this.isRequesting = false;\n          resolve(updatedTodo);\n        });\n      }, this.latency);\n    });\n  }\n\n  filterTodosSync(filterCriteria) {\n    switch (filterCriteria) {\n    case 'active':\n      return this.todos.filter((t) => !t.completed);\n    case 'completed':\n      return this.todos.filter((t) => t.completed);\n    case 'all':\n    default:\n      return this.todos;\n    }\n  }\n  filterTodos(filterCriteria) {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        switch (filterCriteria) {\n        case 'active':\n          resolve(this.todos.filter((t) => !t.completed));\n          break;\n        case 'completed':\n          resolve(this.todos.filter((t) => t.completed));\n          break;\n        case 'all':\n        default:\n          resolve(this.todos);\n        }\n        this.isRequesting = false;\n      }, this.latency);\n    });\n  }\n\n  toggleAllTodos() {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        this.todos.forEach((t) => t.completed = !t.completed);\n        resolve(true);\n        this.isRequesting = false;\n      }, this.latency);\n    });\n  }\n\n  completeAllTodos() {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        this.todos.forEach((t) => t.completed = true);\n        resolve(true);\n        this.isRequesting = false;\n      }, this.latency);\n    });\n  }\n\n  removeAllTodos() {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        this.todos.splice(0);\n        resolve(true);\n        this.isRequesting = false;\n      }, this.latency);\n    });\n  }\n\n  removeCompletedTodos() {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        this.todos = this.todos.filter((todo) => !todo.completed);\n        resolve(true);\n        this.isRequesting = false;\n      }, this.latency);\n    });\n  }\n}\n","export class InMemoryTodoService {\n  todos = [];\n\n  constructor() { }\n\n  getAllTodos() {\n    return this.todos;\n  }\n\n  getTodoById(id) {\n    return this.todos.filter(todo => todo.id === id).pop();\n  }\n\n  addTodo(todo) {\n    this.todos.push(todo);\n    return this;\n  }\n\n  deleteTodoById(id) {\n    this.todos = this.todos.filter(todo => todo.id !== id);\n    return this;\n  }\n\n  updateTodoById(id, values = {}) {\n    let todo = this.getTodoById(id);\n    if (!todo) {\n      return null;\n    }\n    Object.assign(todo, values);\n    return todo;\n  }\n\n  filterTodos(filterCriteria) {\n    switch (filterCriteria) {\n    case 'active':\n      return this.todos.filter((t) => !t.completed);\n    case 'completed':\n      return this.todos.filter((t) => t.completed);\n    case 'all':\n    default:\n      return this.todos;\n    }\n  }\n\n  toggleAllTodos() {\n    this.todos.forEach((t) => t.completed = !t.completed);\n  }\n\n  completeAllTodos() {\n    this.todos.forEach((t) => t.completed = true);\n  }\n\n  removeAllTodos() {\n    this.todos.splice(0);\n  }\n\n  removeCompletedTodos() {\n    this.todos = this.todos.filter((todo) => !todo.completed);\n  }\n}\n\n","export class PouchDBTodoPromiseService {\n  constructor() {\n    this.db = new PouchDB('todos-db', {adapter: 'websql'});\n    this.todos = [];\n    this.latency = 100;\n    this.isRequesting = false;\n    this.completedTodosCount = 0;\n    this.allTodosCount = 0;\n    this.activeTodosCount = 0;\n  }\n\n  getAllTodos() {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.db.allDocs({\n          include_docs: true\n        }).then(result => {\n          this.todos = [];\n          result.rows.forEach(todo => {\n            this.todos.push(todo.doc);\n          });\n          this.allTodosCount = result.rows.length;\n          this.activeTodosCount = this.todos.filter((t) => !t.completed).length;\n          this.completedTodosCount = this.todos.filter((t) => t.completed).length;\n          resolve(true);\n          this.isRequesting = false;\n        }).catch(err => {\n          console.log(err);\n          reject(err);\n        });\n      }, this.latency);\n    });\n  }\n\n  getTodoById(id) {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.db.get(id).then( found => {\n          resolve(JSON.parse(JSON.stringify(found)));\n          this.isRequesting = false;\n        }).catch(err => {\n          console.log(err);\n          reject(err);\n        });\n      }, this.latency);\n    });\n  }\n\n  addTodo(todo) {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        todo.id = (this.todos.length > 0) ? this.todos[this.todos.length - 1].id + 1 : 1;\n        //console.log(this.todos[this.todos.length - 1].id);\n        console.log('Next Id: ' + todo.id);\n        todo['_id'] = todo.id.toString();\n        let instance = JSON.parse(JSON.stringify(todo));\n        this.db.put(instance).then(response => {\n          this.isRequesting = false;\n          resolve(instance);\n        }).catch(err => {\n          console.log(err);\n          reject(err);\n        });\n      }, this.latency);\n    });\n  }\n\n  deleteTodoById(id) {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.db.get(id.toString()).then( deletedTodo => {\n          // throw new Error('Simulating an error');\n          return this.db.remove(deletedTodo);\n        }).then(deletedTodo => {\n          this.isRequesting = false;\n          resolve(deletedTodo);\n        }).catch(ex => {\n          reject(ex);\n        });\n      }, this.latency);\n    });\n  }\n\n  updateTodoById(id, values = {}) {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.db.get(id.toString()).then( updatedTodo => {\n          Object.assign(updatedTodo, values);\n          return this.db.put(updatedTodo);\n        }).then(response => {\n          this.isRequesting = false;\n          this.db.get(id.toString()).then( updatedTodo => {\n            resolve(updatedTodo);\n          });\n        }).catch(ex => {\n          reject(ex);\n        });\n      }, this.latency);\n    });\n  }\n  toggleTodoCompleted(todo) {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        this.updateTodoById(todo.id, { completed: !todo.completed }).then(\n        updatedTodo => {\n          this.isRequesting = false;\n          resolve(updatedTodo);\n        });\n      }, this.latency);\n    });\n  }\n\n  filterTodos(filterCriteria) {\n    return this.getAllTodos().then(result => {\n      console.log(result);\n      //return this.filterTodos(filterCriteria);\n      return new Promise((resolve) => {\n        switch (filterCriteria) {\n        case 'active':\n          resolve(this.todos.filter((t) => !t.completed));\n          break;\n        case 'completed':\n          resolve(this.todos.filter((t) => t.completed));\n          break;\n        case 'all':\n        default:\n          resolve(this.todos);\n          break;\n        }\n      });\n    });\n  }\n\n  toggleAllTodos() {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        this.todos.forEach((t) => t.completed = !t.completed);\n        this.db.bulkDocs(this.todos).then(result => {\n          resolve(true);\n          this.isRequesting = false;\n        }).catch(err => {\n          reject(err);\n        });\n      }, this.latency);\n    });\n  }\n\n  completeAllTodos() {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.todos.forEach((t) => t.completed = true);\n        this.db.bulkDocs(this.todos).then(result => {\n          resolve(true);\n          this.isRequesting = false;\n        }).catch(err => {\n          reject(err);\n        });\n      }, this.latency);\n    });\n  }\n\n  removeAllTodos() {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.db.allDocs().then(result => {\n          return Promise.all(result.rows.map(row => {\n            return this.db.remove(row.id, row.value.rev);\n          }));\n        }).then(() => {\n          this.todos.splice(0);\n          resolve(true);\n          this.isRequesting = false;\n        }).catch(err => {\n          reject(err);\n        });\n      }, this.latency);\n    });\n  }\n\n  removeCompletedTodos() {\n    this.isRequesting = true;\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        this.tobeDeletedTodos = this.todos.filter((todo) => todo.completed);\n        this.tobeDeletedTodos.forEach(t => t._deleted = true);\n        this.db.bulkDocs(this.tobeDeletedTodos).then(result => {\n          this.todos = this.todos.filter((todo) => !todo.completed);\n          resolve(true);\n          this.isRequesting = false;\n        }).catch(err => {\n          reject(err);\n        });\n      }, this.latency);\n    });\n  }\n}\n","import {PouchDBTodoPromiseService} from '../services/pouchdb-todo-promise-service';\nimport { inject } from 'aurelia-framework';\nimport { Router } from 'aurelia-router';\n\n@inject(Router)\nexport class Todo {\n  todo;\n  constructor(router) {\n    this.router = router;\n    this.appName = 'Todo List';\n    this.self = this;\n    this.todoService = new PouchDBTodoPromiseService();\n  }\n\n  activate(params, routeConfig) {\n    this.routeConfig = routeConfig;\n    return this.todoService.getTodoById(params.id).then(todo => {\n      this.todo = todo;\n      this.previousTitle = this.todo.title;\n      this.todo.editMode = true;\n      this.routeConfig.navModel.setTitle(todo.title);\n      this.todoBeforeEdit = JSON.parse(JSON.stringify(this.todo));\n    });\n  }\n\n  backToList() {\n    this.router.navigate(this.router.generate('todos'));\n  }\n  update() {\n    if (this.todo.editMode) {\n      this.todo.editMode = false;\n      this.todoService.updateTodoById(this.todo.id, this.todo).then(updatedTodo => {\n        Object.assign(this.todo, updatedTodo);\n      });\n    } else {\n      this.previousTitle = this.todo.title;\n      this.todo.editMode = true;\n      return this.todo;\n    }\n  }\n\n  remove() {\n    this.todoService.deleteTodoById(this.todo.id).then(deletedTodo => {\n      console.log(deletedTodo);\n    }).catch(error => {\n      console.log('ERROR: ' + error);\n    });\n  }\n\n  cancel() {\n    this.todo.title = this.previousTitle;\n    this.todo.editMode = false;\n  }\n\n  canDeactivate() {\n    if (JSON.stringify(this.todoBeforeEdit) !== JSON.stringify(this.todo)) {\n      return confirm('You have modified the Todo item. Are you sure you want to navigate away?');\n    }\n  }\n}\n","import {PouchDBTodoPromiseService} from '../services/pouchdb-todo-promise-service';\nimport { inject } from 'aurelia-framework';\nimport { Router } from 'aurelia-router';\n\n@inject(Router)\nexport class Detail {\n  todo;\n  constructor(router) {\n    this.router = router;\n    this.appName = 'Todo List';\n    this.self = this;\n    this.todoService = new PouchDBTodoPromiseService();\n  }\n\n  activate(params, routeConfig) {\n    this.routeConfig = routeConfig;\n    return this.todoService.getTodoById(params.id).then(todo => {\n      this.todo = todo;\n      this.previousTitle = this.todo.title;\n      this.todo.editMode = true;\n      this.routeConfig.navModel.setTitle(todo.title);\n    });\n  }\n\n  update() {\n    if (this.todo.editMode) {\n      this.todo.editMode = false;\n      this.todoService.updateTodoById(this.todo.id, this.todo).then(updatedTodo => {\n        Object.assign(this.todo, updatedTodo);\n      });\n    } else {\n      this.previousTitle = this.todo.title;\n      this.todo.editMode = true;\n      return this.todo;\n    }\n  }\n\n  remove() {\n    this.todoService.deleteTodoById(this.todo.id).then(deletedTodo => {\n      console.log(deletedTodo);\n    }).catch(error => {\n      console.log('ERROR: ' + error);\n    });\n  }\n\n  cancel() {\n    this.todo.title = this.previousTitle;\n    this.todo.editMode = false;\n  }\n\n  refresh() {\n    this.router.navigate(this.router.generate('todos'));\n  }\n}\n","import {inject, Aurelia} from 'aurelia-framework';\nimport {Todo} from '../models/todo';\nimport {PouchDBTodoPromiseService} from '../services/pouchdb-todo-promise-service';\n\n@inject(Aurelia)\nexport class Index {\n  configureRouter(config, router) {\n    config.title = 'Aurelia';\n    config.map([\n      { route: ['', ':filter'], name: 'todos-filter', moduleId: 'todo-manager/no-selection'},\n      { route: 'detail/:id', name: 'todos-detail-id', moduleId: 'todo-manager/detail'}\n    ]);\n\n    this.router = router;\n  }\n\n  constructor() {\n    this.appName = 'Todo List';\n    this.self = this;\n    this.todoTitle = '';\n    this.previousTitle = '';\n    this.todoCompleted = false;\n    this.activeFilter = 'all';\n    this.todoService = new PouchDBTodoPromiseService();\n    this.filterTodos(this.activeFilter);\n  }\n\n  activate(params) {\n    this.activeFilter = (params.filter) ? params.filter : 'all';\n    this.filterTodos(this.activeFilter);\n  }\n\n  get allTodosCount() {\n    return this.todoService.allTodosCount;\n  }\n\n  get activeTodosCount() {\n    return this.todoService.activeTodosCount;\n  }\n\n  get completedTodosCount() {\n    return this.todoService.completedTodosCount;\n  }\n\n  filterTodos(filterCriteria) {\n    this.activeFilter = filterCriteria;\n    this.todoService.filterTodos(this.activeFilter).then(todos => {\n      this.todos = todos;\n    });\n  }\n\n  addTodo(todo) {\n    this.todoService.addTodo(new Todo(todo.title, todo.completed)).then(addedTodo => {\n      this.todoTitle = '';\n      console.log(addedTodo);\n      this.todoService.filterTodos(this.activeFilter).then(todos => {\n        this.todos = todos;\n      });\n    });\n  }\n\n  removeTodo(todo) {\n    this.todoService.deleteTodoById(todo.id).then(deletedTodo => {\n      console.log(deletedTodo);\n      this.todoService.filterTodos(this.activeFilter).then(todos => {\n        this.todos = todos;\n      });\n    }).catch(error => {\n      console.log('ERROR: ' + error);\n    });\n  }\n\n  updateTodo(todo) {\n    if (todo.editMode) {\n      todo.editMode = false;\n      this.todoService.updateTodoById(todo.id, todo);\n    } else {\n      this.previousTitle = todo.title;\n      todo.editMode = true;\n    }\n  }\n\n  cancelEditTodo(todo) {\n    todo.title = this.previousTitle;\n    todo.editMode = false;\n  }\n\n  checkIfAllTodosAreCompleted() {\n    return this.todos.every(todo => todo.completed);\n  }\n\n  toggleAllTodos() {\n    this.todoService.toggleAllTodos().then(result => {\n      if (result) {\n        this.filterTodos(this.activeFilter);\n      }\n    });\n  }\n\n  completeAllTodos() {\n    this.todoService.completeAllTodos().then(result => {\n      if (result) {\n        this.checkIfAllTodosAreCompleted();\n        this.filterTodos(this.activeFilter);\n      }\n    });\n  }\n\n  removeAllTodos() {\n    this.todoService.removeAllTodos().then(result => {\n      if (result) {\n        this.filterTodos(this.activeFilter);\n      }\n    });\n  }\n\n  removeCompletedTodos() {\n    this.todoService.removeCompletedTodos().then(result => {\n      if (result) {\n        this.filterTodos(this.activeFilter);\n      }\n    });\n  }\n}\n","export class NoSelection {}\n","class _IdGenerator {\n  constructor() {\n    this.id = 0;\n  }\n\n  getNextId() {\n    return ++this.id;\n  }\n}\n\nexport let IdGenerator = new _IdGenerator();\n","import {inject, customAttribute, bindingMode, TaskQueue} from 'aurelia-framework';\n\n@inject(Element, TaskQueue)\n@customAttribute('auto-focus', bindingMode.twoWay)\nexport class AutoFocusCustomAttribute {\n  constructor(element, taskQueue) {\n    this.element = element;\n    this.taskQueue = taskQueue;\n  }\n\n  giveFocus() {\n    this.taskQueue.queueMicroTask( () => {\n      this.element.focus();\n    });\n  }\n\n  attached() {\n    this.giveFocus();\n  }\n  valueChanged(newValue, oldValue) {\n\n  }\n}\n\n","export class KeyupEnterCustomAttribute {\n  static inject = [Element];\n  element;\n  value;\n  enterPressed;\n\n  constructor(element) {\n    this.element = element;\n\n    this.enterPressed = e => {\n      let key = e.which || e.keyCode;\n      if (key === 13) {\n        this.value();//'this' won't be changed so you have access to your VM properties in 'called' method\n      }\n    };\n  }\n\n  attached() {\n    this.element.addEventListener('keyup', this.enterPressed);\n  }\n\n  detached() {\n    this.element.removeEventListener('keyup', this.enterPressed);\n  }\n}\n\n\n","export class KeyupEscCustomAttribute {\n  static inject = [Element];\n  element;\n  value;\n  escPressed;\n\n  constructor(element) {\n    this.element = element;\n\n    this.escPressed = e => {\n      let key = e.which || e.keyCode;\n      if (key === 27) {\n        this.value();//'this' won't be changed so you have access to your VM properties in 'called' method\n      }\n    };\n  }\n\n  attached() {\n    this.element.addEventListener('keyup', this.escPressed);\n  }\n\n  detached() {\n    this.element.removeEventListener('keyup', this.escPressed);\n  }\n}\n\n\n","import {customElement, bindable, bindingMode} from 'aurelia-framework';\n\n@customElement('todo-action')\nexport class TodoAction {\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) allTodosCount;\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) completedTodosCount;\n  @bindable removeAllTodosCallback;\n  @bindable removeCompletedTodosCallback;\n  @bindable toggleAllTodosCallback;\n  @bindable completeAllTodosCallback;\n}\n","import {customElement, bindable, bindingMode} from 'aurelia-framework';\n\n@customElement('todo-add')\nexport class TodoAdd {\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) todoTitle;\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) todoCompleted;\n  @bindable addCallback;\n}\n\n","\nimport {customElement, bindable, bindingMode} from 'aurelia-framework';\n\n@customElement('todo-filter')\nexport class TodoFilter {\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) activeFilter;\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) allTodosCount;\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) activeTodosCount;\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) completedTodosCount;\n  @bindable filterTodosCallback;\n}\n","import {customElement, bindable, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\n\n@customElement('todo-item')\n@inject(Router)\nexport class TodoItem {\n  @bindable todo;\n  @bindable removeCallback;\n  @bindable updateCallback;\n  @bindable cancelEditCallback;\n\n  constructor(router) {\n    this.router = router;\n  }\n\n  attached() {\n  }\n\n  updateSingleInNewPage(todo) {\n    this.router.navigate(this.router.generate('todo', { id: todo.id}));\n  }\n}\n","import {customElement, bindable} from 'aurelia-framework';\n\n@customElement('todo-list')\nexport class TodoList {\n  @bindable todos;\n  @bindable host;\n  @bindable removeCallback;\n  @bindable updateCallback;\n  @bindable cancelEditCallback;\n  constructor() {}\n  activate() {\n  }\n  removeTodo(todo) {\n    this.host.removeTodo(todo);\n  }\n\n  updateTodo(todo) {\n    this.host.updateTodo(todo);\n  }\n}\n","import {customElement, bindable, inject} from 'aurelia-framework';\nimport { Router} from 'aurelia-router';\n@customElement('todo-popup-item')\n@inject(Router)\nexport class TodoPopupItem {\n  @bindable todo;\n  @bindable removeCallback;\n  @bindable updateCallback;\n  @bindable cancelEditCallback;\n\n  constructor(router) {\n    this.router = router;\n  }\n  attached() {\n  }\n\n  todoChanged(newValue, oldValue) {\n    console.log(newValue);\n  }\n\n  toggleCompleted(todo) {\n    todo.completed = !todo.completed;\n    todo.editMode = true;\n    //Object.assign(todo, this.updateCallback(todo));\n    this.updateCallback(todo);\n    return true;\n  }\n}\n","//$padding: 10px;\n//$bodyColor: blue;\n//body{ font-family: Verdana, Arial; color:$bodyColor;}\n.strikeout { text-decoration: line-through; }\n//ul { padding-left: $padding; }\n//li { list-style-type: none; }\n"],"sourceRoot":".."}